{
  "tasks": [
    {
      "id": "enhance_001",
      "title": "Backend snap service and streak logic",
      "description": "Create backend/internal/services/snap_service.go implementing the core Snapstreak business logic. The Snap and SnapStreak models already exist in backend/internal/models/snap.go (Snap: ID, UserID, ImageURL, Caption, Filter, SnapDate, LikeCount; SnapStreak: ID, UserID, CurrentStreak, LongestStreak, TotalSnaps, LastSnapDate). Create SnapService struct with db *gorm.DB field and NewSnapService(db *gorm.DB) constructor.\n\nImplement these methods:\n1. CreateSnap(userID uuid.UUID, imageURL string, caption string, filter string) (*models.Snap, error) — validate filter is in models.SnapFilters, create Snap with SnapDate=time.Now(), then call updateStreak. Return the created snap.\n2. updateStreak(userID uuid.UUID) error — find or create SnapStreak for user. If LastSnapDate is today, do nothing (already snapped). If LastSnapDate is yesterday, increment CurrentStreak by 1. If LastSnapDate is older, reset CurrentStreak to 1. Update LongestStreak if CurrentStreak exceeds it. Increment TotalSnaps. Set LastSnapDate to today. Use time truncation to compare dates (truncate to 24h).\n3. GetUserSnaps(userID uuid.UUID, limit int, offset int) ([]models.Snap, int64, error) — paginated query ordered by snap_date DESC. Return total count for pagination.\n4. GetStreak(userID uuid.UUID) (*models.SnapStreak, error) — find streak record, return zero-value streak if not found.\n5. GetTodaySnap(userID uuid.UUID) (*models.Snap, error) — check if user already posted today by querying snaps WHERE snap_date >= start of today.\n6. DeleteSnap(userID uuid.UUID, snapID uuid.UUID) error — soft delete snap only if owned by userID.\n7. LikeSnap(snapID uuid.UUID) error — increment LikeCount by 1 using db.Model(&models.Snap{}).Where(\"id = ?\", snapID).UpdateColumn(\"like_count\", gorm.Expr(\"like_count + 1\")).\n\nAlso create backend/internal/dto/snap_dto.go with: CreateSnapRequest{ImageURL string, Caption string, Filter string}, SnapResponse{same as Snap model fields}, StreakResponse{CurrentStreak int, LongestStreak int, TotalSnaps int, LastSnapDate time.Time, HasSnappedToday bool}, SnapsListResponse{Snaps []SnapResponse, Total int64, Page int, Limit int}.",
      "status": "pending",
      "priority": 10,
      "depends_on": [],
      "test_command": "cd backend && go build ./...",
      "auto_commit": true
    },
    {
      "id": "enhance_002",
      "title": "Backend snap handler and API routes",
      "description": "Create backend/internal/handlers/snap_handler.go with SnapHandler struct containing snapService field. Constructor: NewSnapHandler(service *services.SnapService). Import fiber, dto, services, uuid packages.\n\nImplement these handler methods:\n1. CreateSnap(c *fiber.Ctx) error — extract userID from JWT via extractUserID(c), parse CreateSnapRequest body, call snapService.CreateSnap, return 201 with SnapResponse.\n2. GetMySnaps(c *fiber.Ctx) error — extract userID, parse query params page (default 1) and limit (default 20) via c.QueryInt, call snapService.GetUserSnaps with offset=(page-1)*limit, return SnapsListResponse.\n3. GetStreak(c *fiber.Ctx) error — extract userID, call snapService.GetStreak and snapService.GetTodaySnap, build StreakResponse with HasSnappedToday=todaySnap!=nil, return JSON.\n4. DeleteSnap(c *fiber.Ctx) error — extract userID and snapID from c.Params(\"id\"), parse UUID, call snapService.DeleteSnap, return {\"message\": \"Snap deleted\"}.\n5. LikeSnap(c *fiber.Ctx) error — parse snapID from params, call snapService.LikeSnap, return {\"message\": \"Snap liked\"}.\n\nModify backend/internal/routes/routes.go: add snapHandler parameter to Setup function. Register routes under protected group: POST /snaps (CreateSnap), GET /snaps (GetMySnaps), GET /snaps/streak (GetStreak), DELETE /snaps/:id (DeleteSnap), POST /snaps/:id/like (LikeSnap).\n\nModify backend/cmd/server/main.go: create snapService := services.NewSnapService(database.DB), snapHandler := handlers.NewSnapHandler(snapService), pass snapHandler to routes.Setup call.",
      "status": "pending",
      "priority": 9,
      "depends_on": ["enhance_001"],
      "test_command": "cd backend && go build ./...",
      "auto_commit": true
    },
    {
      "id": "enhance_003",
      "title": "Onboarding screens with 3-page flow",
      "description": "Create mobile/app/(onboarding)/_layout.tsx: simple Stack layout with headerShown: false, transparent background. Create mobile/app/(onboarding)/index.tsx implementing a 3-page horizontal swipe onboarding using ScrollView with pagingEnabled and horizontal props.\n\nPage 1 (Welcome): View with bg-white, centered Ionicons 'camera-outline' icon size 80 color '#2563eb', Text 'Snapstreak' className='text-4xl font-bold text-gray-900 mt-6', Text 'Keep your streak alive' className='text-lg text-gray-500 mt-2 text-center'. Page 2 (Features): Ionicons 'flame-outline' icon size 80 color '#f97316', Text 'Daily Photo Challenges' bold, three feature rows with checkmark-circle icons: 'Post one photo every day', 'Build your longest streak', 'Share moments with friends'. Page 3 (CTA): Ionicons 'rocket-outline' icon size 80 color '#2563eb', Text 'Ready to Start?' bold, two buttons: primary Button 'Get Started' that calls AsyncStorage.setItem('onboarding_complete','true') then router.replace('/(auth)/login'), and outline Button 'Skip for now' that sets onboarding_complete and navigates to /(auth)/login.\n\nUse useState for page index, show 3 dots at bottom (View with flex-row gap-2, three View circles h-2 w-2 rounded-full, active: bg-primary-600, inactive: bg-gray-300). Use Dimensions.get('window').width for page width. Import AsyncStorage from '@react-native-async-storage/async-storage' — NOTE: this package must be added. Use react-native's built-in ScrollView (already available).\n\nModify mobile/app/index.tsx: before auth check, add AsyncStorage.getItem('onboarding_complete') check. If null, redirect to /(onboarding). Track with useState<boolean|null>(null) for onboardingDone state.",
      "status": "pending",
      "priority": 8,
      "depends_on": [],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true
    },
    {
      "id": "enhance_004",
      "title": "Guest mode with 3 free snaps counter",
      "description": "Implement guest mode allowing 3 free uses without login. Modify mobile/contexts/AuthContext.tsx: add isGuest boolean to AuthContextType and state. Add enterGuestMode callback that sets isGuest=true without API call, sets user to {id:'guest', email:'Guest'}. Add getRemainingFreeUses() that reads 'guest_usage_count' from AsyncStorage and returns 3 - count. Add incrementGuestUsage() that increments the count.\n\nModify mobile/app/(auth)/login.tsx: add a 'Try Free' button below the Sign In button. Use outline variant Button with title='Try Free — 3 Snaps' that calls enterGuestMode() then router.replace('/(protected)/home'). Place it after AppleSignInButton with mt-3 spacing.\n\nModify mobile/app/(protected)/_layout.tsx: update the auth guard — allow access if isAuthenticated OR isGuest. Import isGuest from useAuth. When isGuest, show a banner View at top with bg-primary-50 p-2: Text 'Guest Mode — X free snaps remaining' className='text-xs text-center text-primary-700'.\n\nModify mobile/app/index.tsx: update routing logic to check isGuest. If isGuest, redirect to /(protected)/home. Priority: onboarding check → guest check → auth check → default to login.\n\nAll guest state persists in AsyncStorage under keys 'is_guest' and 'guest_usage_count'. When guest exhausts 3 uses, show Alert prompting to create account, then navigate to /(auth)/register.",
      "status": "pending",
      "priority": 8,
      "depends_on": ["enhance_003"],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true
    },
    {
      "id": "enhance_005",
      "title": "Home screen with camera snap creation",
      "description": "Completely rewrite mobile/app/(protected)/home.tsx — remove ALL placeholder content ('App Factory', 'Your MVP starts here', 'Phase 0 Master Template'). The new home screen is the snap creation + streak dashboard.\n\nTop section: SafeAreaView bg-white flex-1. Header View with flex-row justify-between items-center px-6 pt-4: Text 'Snapstreak' className='text-2xl font-bold text-gray-900', View showing streak flame: Ionicons 'flame' color='#f97316' size=28 next to Text with currentStreak from API.\n\nStreak card: View className='mx-6 mt-4 rounded-2xl bg-gradient-to-r p-6' (use a View with bg-primary-600 rounded-2xl p-6 since NativeWind v4 doesn't support gradient-to-r — use a wrapper View with overflow-hidden and a LinearGradient-like solid color). Show CurrentStreak (large text-5xl font-bold text-white), 'day streak' label text-primary-100, LongestStreak and TotalSnaps in a flex-row below with text-white.\n\nToday's snap section: if already snapped today (check via GET /snaps/streak HasSnappedToday), show the snap image in a rounded-2xl overflow-hidden View with the caption below. If not snapped, show a large camera button: Pressable className='mx-6 mt-6 h-64 rounded-2xl bg-gray-100 items-center justify-center border-2 border-dashed border-gray-300' with Ionicons 'camera' size=48 color='#9ca3af' and Text 'Tap to snap' text-gray-400 mt-2. OnPress: call expo-image-picker's launchCameraAsync (package: expo-image-picker, must be added). On image captured, navigate to a snap creation modal or directly POST /snaps with the image URI.\n\nFor MVP, the ImageURL stored is the local URI. POST to /snaps endpoint with {image_url: uri, caption: userCaption, filter: 'none'}. After posting, refetch streak data. Use useEffect on mount to call GET /snaps/streak and store in state. Add pull-to-refresh via RefreshControl on a ScrollView wrapper.\n\nState: streak (StreakResponse|null), todaySnap (Snap|null), isLoading boolean, refreshing boolean. Use hapticSuccess after successful snap creation.",
      "status": "pending",
      "priority": 8,
      "depends_on": ["enhance_002"],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true
    },
    {
      "id": "enhance_006",
      "title": "Snap history tab with paginated list",
      "description": "Create mobile/app/(protected)/history.tsx — a paginated snap history screen showing all past snaps in a vertical scrollable list.\n\nScreen structure: SafeAreaView bg-white flex-1. Header: Text 'My Snaps' className='px-6 pt-8 text-3xl font-bold text-gray-900 mb-4'. Use FlatList with data=snaps array, renderItem showing each snap as a card.\n\nSnap card layout: View className='mx-6 mb-4 rounded-2xl bg-gray-50 overflow-hidden'. Top: Image (from react-native) with source={{uri: item.image_url}} className='w-full h-48' resizeMode='cover'. If no image_url, show a placeholder View bg-gray-200 h-48 with Ionicons 'image-outline'. Bottom: View p-4 with Text caption (text-base text-gray-900 font-medium), flex-row with: Ionicons 'flame' + streak day label, Ionicons 'heart' + like_count, Text snap_date formatted as 'MMM d, yyyy'. Filter badge: small View rounded-full bg-primary-100 px-2 py-0.5 with Text text-xs text-primary-700 showing the filter name.\n\nPagination: state for snaps array, page number, total count, loading, refreshing. On mount, fetch GET /snaps?page=1&limit=20. onEndReached: if snaps.length < total, increment page and append results. Pull-to-refresh: reset page to 1 and replace snaps array.\n\nEmpty state: when snaps.length === 0 and not loading, show View items-center justify-center py-20 with Ionicons 'camera-outline' size=64 color='#d1d5db', Text 'No snaps yet' text-lg text-gray-400 mt-4, Text 'Take your first snap to start your streak!' text-sm text-gray-300.\n\nModify mobile/app/(protected)/_layout.tsx: add a new Tabs.Screen for 'history' between home and settings with tabBarIcon Ionicons 'time-outline' and title 'History'.",
      "status": "pending",
      "priority": 7,
      "depends_on": ["enhance_002", "enhance_005"],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true
    },
    {
      "id": "enhance_007",
      "title": "Profile tab with streak stats and user info",
      "description": "Create mobile/app/(protected)/profile.tsx — user profile screen showing account info, streak statistics, and app settings quick links.\n\nScreen structure: SafeAreaView bg-white flex-1, ScrollView. Header section: View items-center pt-8 pb-6. Avatar circle: View h-20 w-20 rounded-full bg-primary-100 items-center justify-center, Text with first letter of email uppercase className='text-3xl font-bold text-primary-600'. Below: Text user.email text-base text-gray-600 mt-2. Member since: Text 'Member since Feb 2026' text-sm text-gray-400.\n\nStreak stats section: View flex-row mx-6 mt-6, three equal stat cards. Each card: View flex-1 items-center p-4 rounded-2xl bg-gray-50 mx-1. Top: Text with number (text-3xl font-bold text-gray-900), Bottom: Text with label (text-xs text-gray-500 mt-1). Cards: CurrentStreak/'Current Streak', LongestStreak/'Best Streak', TotalSnaps/'Total Snaps'.\n\nAchievements section: View mx-6 mt-8. Text 'Achievements' text-lg font-bold text-gray-900 mb-4. Achievement badges based on streak milestones: 3-day (Starter, bronze), 7-day (Weekly Warrior, silver), 14-day (Dedicated, gold), 30-day (Unstoppable, diamond). Each badge: View flex-row items-center p-3 rounded-xl mb-2. Locked badges: bg-gray-50 with gray icon. Unlocked: bg-primary-50 with primary icon. Use Ionicons 'trophy', 'medal', 'ribbon', 'diamond'.\n\nQuick links section: Pressable rows linking to settings and paywall. Each: View flex-row items-center justify-between p-4 border-b border-gray-100. Text + Ionicons 'chevron-forward'.\n\nFetch data on mount: GET /snaps/streak for stats. Modify mobile/app/(protected)/_layout.tsx: add Tabs.Screen 'profile' with Ionicons 'person-outline', place between history and settings tabs.",
      "status": "pending",
      "priority": 7,
      "depends_on": ["enhance_002", "enhance_005"],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true
    },
    {
      "id": "enhance_008",
      "title": "Snap creation modal with caption and filter",
      "description": "Create mobile/app/(protected)/snap-create.tsx as a modal screen for composing a snap after taking/selecting a photo. This screen is navigated to from the home screen camera button.\n\nScreen flow: home.tsx captures photo via expo-image-picker launchCameraAsync (or launchImageLibraryAsync as fallback). On success, router.push({pathname:'/(protected)/snap-create', params:{imageUri: result.assets[0].uri}}).\n\nSnap creation screen: SafeAreaView bg-white flex-1. Top bar: View flex-row items-center justify-between px-6 pt-4. Left: Pressable with Ionicons 'close' size=24 calling router.back(). Center: Text 'New Snap' font-bold text-lg. Right: Pressable 'Post' text with primary color, calls handlePost.\n\nImage preview: View mx-6 mt-4 rounded-2xl overflow-hidden. Image source={{uri: imageUri}} className='w-full' style={{height:350}} resizeMode='cover'.\n\nCaption input: View mx-6 mt-4. Input component (from components/ui/Input) with placeholder='Add a caption...' maxLength={280}, multiline, value=caption state, onChangeText=setCaption. Character counter: Text className='text-xs text-gray-400 text-right mt-1' showing `${caption.length}/280`.\n\nFilter selector: horizontal ScrollView mx-6 mt-4 showsHorizontalScrollIndicator={false}. Map over models.SnapFilters equivalent array ['none','vintage','warm','cool','dramatic','minimal','vibrant','noir']. Each filter: Pressable className='mr-3 items-center'. Circle View h-12 w-12 rounded-full with filter-specific bg colors (none:gray-200, vintage:amber-200, warm:orange-200, cool:blue-200, dramatic:gray-800, minimal:gray-100, vibrant:purple-200, noir:gray-900). Selected: border-2 border-primary-600. Text filter name text-xs text-gray-600 mt-1 capitalize.\n\nPost handler: validate imageUri exists, POST to /snaps with {image_url: imageUri, caption, filter: selectedFilter}. Show loading state on Post button. On success: hapticSuccess(), router.back(). On error: Alert with message.\n\nModify mobile/app/(protected)/_layout.tsx: add Tabs.Screen for 'snap-create' with href:null (hidden from tab bar) to make it a valid route.",
      "status": "pending",
      "priority": 7,
      "depends_on": ["enhance_005"],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true
    },
    {
      "id": "enhance_009",
      "title": "Fix settings restore purchases and add Snapstreak branding",
      "description": "Fix the stub restore purchases in mobile/app/(protected)/settings.tsx. The current implementation at line 62-66 shows a static Alert instead of calling RevenueCat. Replace handleRestorePurchases: import useSubscription from contexts/SubscriptionContext. Call const success = await handleRestore() from useSubscription. If success, hapticSuccess() and Alert.alert('Success','Purchases restored!'). If not, Alert.alert('Not Found','No previous purchases found.').\n\nAlso update settings screen to include Snapstreak-specific sections:\n1. Add 'Streak' section above Account section: View with rounded-xl bg-gray-50 p-4 mb-6. Show streak info: fetch GET /snaps/streak on mount. Display 'Current Streak: X days', 'Longest Streak: X days', 'Total Snaps: X'. Use useEffect + useState for streak data.\n2. Add 'Notifications' section after Security: Pressable row for 'Daily Reminder' with Switch toggle (cosmetic for now, stores in AsyncStorage 'daily_reminder_enabled').\n3. Add 'About' section before Danger Zone: app version Text '1.0.0', privacy policy Pressable (opens Linking.openURL), terms of service Pressable.\n4. Remove the generic 'App Factory' references — ensure nothing says 'Phase 0' or 'Master Template' anywhere.\n\nUpdate register.tsx subtitle from 'Start building something great' to 'Start your streak today'. Update app.json: change name from 'mobile' to 'Snapstreak', slug from 'mobile' to 'snapstreak', scheme from 'appfactory' to 'snapstreak'.",
      "status": "pending",
      "priority": 7,
      "depends_on": ["enhance_002"],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true
    },
    {
      "id": "enhance_010",
      "title": "Daily streak engagement with share prompts",
      "description": "Implement engagement features: streak milestone celebrations, share prompts after every snap, and daily motivation.\n\nCreate mobile/components/StreakCelebration.tsx: a modal component shown when user hits streak milestones (3, 7, 14, 21, 30, 50, 100 days). Props: visible boolean, streakCount number, onClose function. Content: Modal (from components/ui/Modal) with: large Ionicons 'flame' with animated scale (use Animated.View from react-native with a simple useEffect scale animation from 0.5 to 1), Text 'X Day Streak!' text-3xl font-bold text-center, motivational message based on milestone (3:'Getting started!', 7:'One week strong!', 14:'Two weeks unstoppable!', 30:'A whole month!', etc.), primary Button 'Share My Streak' that calls shareStreak, outline Button 'Keep Going' that calls onClose.\n\nCreate mobile/lib/share.ts: import { Share } from 'react-native'. Export shareStreak(streakCount: number): calls Share.share({message: `I'm on a ${streakCount}-day streak on Snapstreak! Can you beat my streak?`, title: 'My Snapstreak'}). Export shareSnap(caption: string): calls Share.share({message: `Check out my snap: \"${caption}\" — Snapstreak`, title: 'My Snap'}).\n\nModify mobile/app/(protected)/home.tsx: after successful snap creation, check if new streak count is a milestone. If yes, show StreakCelebration modal. After every snap, show a 'Share' Pressable row with Ionicons 'share-outline' that calls shareSnap.\n\nAdd streak status text on home screen below the streak card: conditional messages like 'Post today to keep your streak!' (if not snapped), 'Streak safe! Come back tomorrow.' (if snapped). Use text-sm with appropriate colors (orange for warning, green for safe).",
      "status": "pending",
      "priority": 6,
      "depends_on": ["enhance_005"],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true
    },
    {
      "id": "enhance_011",
      "title": "UI polish with gradients, shadows, and animations",
      "description": "Polish the entire app UI to App Store quality.\n\n1. Update mobile/tailwind.config.js: add accent color for streaks: accent: {50:'#fff7ed', 100:'#ffedd5', 200:'#fed7aa', 300:'#fdba74', 400:'#fb923c', 500:'#f97316', 600:'#ea580c', 700:'#c2410c', 800:'#9a3412', 900:'#7c2d12'} (orange palette for streak/fire theme).\n\n2. Enhance login.tsx: add a decorative header View bg-primary-600 h-48 rounded-b-3xl (but NativeWind doesn't support rounded-b-3xl, so use style={{borderBottomLeftRadius:24, borderBottomRightRadius:24}}) with centered Ionicons 'flame' size=48 color='white' and Text 'Snapstreak' text-white text-2xl font-bold. Move the form below this header.\n\n3. Enhance register.tsx: same decorative header treatment as login. Update subtitle to 'Start your streak today'.\n\n4. Add loading skeletons: create mobile/components/ui/Skeleton.tsx — View with bg-gray-200 rounded-xl and an animated opacity pulse (Animated.loop with timing 0.3↔0.7 opacity, 1000ms duration). Use in home.tsx and history.tsx while data loads instead of plain ActivityIndicator.\n\n5. Enhance all screens with proper shadows on cards: style={{shadowColor:'#000', shadowOffset:{width:0,height:2}, shadowOpacity:0.08, shadowRadius:12, elevation:3}} on all rounded card Views.\n\n6. Add proper safe area padding: ensure every screen uses SafeAreaView and has pb-safe (or bottom padding accounting for tab bar). Add edges={['top']} prop to SafeAreaView where tab bar provides bottom safe area.\n\n7. Update Button.tsx: add shadow style to primary variant for depth. Add haptic feedback: import hapticLight from lib/haptics, call it in onPress wrapper.\n\n8. Ensure all Pressable elements have haptic feedback on press. Update the protected _layout.tsx tab press listener to use hapticSelection (already done).",
      "status": "pending",
      "priority": 6,
      "depends_on": ["enhance_005", "enhance_006", "enhance_007"],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true
    },
    {
      "id": "enhance_012",
      "title": "Custom tab bar with Slot pattern",
      "description": "Replace the current Tabs-based navigation in mobile/app/(protected)/_layout.tsx with a custom tab bar using Slot from expo-router for full NativeWind v4 styling control.\n\nRewrite _layout.tsx: import { Slot, usePathname, router } from 'expo-router'. Remove the Tabs import. Create a CustomTabBar component inside the file.\n\nCustomTabBar: View className='flex-row bg-white border-t border-gray-100 pb-8 pt-3 px-6' (pb-8 for safe area on phones with home indicator). Define tabs array: [{name:'home', icon:'flame', activeIcon:'flame', label:'Today'}, {name:'history', icon:'time-outline', activeIcon:'time', label:'History'}, {name:'profile', icon:'person-outline', activeIcon:'person', label:'Profile'}, {name:'settings', icon:'settings-outline', activeIcon:'settings', label:'Settings'}].\n\nEach tab: Pressable className='flex-1 items-center' onPress={() => {hapticSelection(); router.push(`/(protected)/${tab.name}`)}}. Active state determined by usePathname().includes(tab.name). Active: Ionicons with activeIcon, color '#2563eb', size 24, Text className='text-xs font-semibold text-primary-600 mt-1'. Inactive: outline icon, color '#9ca3af', Text className='text-xs text-gray-400 mt-1'.\n\nCenter snap button: special tab in the middle (between history and profile). View className='items-center'. Pressable className='h-14 w-14 rounded-full bg-primary-600 items-center justify-center -mt-5' style={{shadowColor:'#2563eb', shadowOffset:{width:0,height:4}, shadowOpacity:0.3, shadowRadius:8, elevation:8}}. Ionicons 'add' size=28 color='white'. OnPress: launch camera picker directly.\n\nMain layout: View className='flex-1'. Auth guard check (keep existing). Slot renders the active screen. CustomTabBar at bottom. Hide snap-create and paywall from tabs (they're accessed programmatically).",
      "status": "pending",
      "priority": 6,
      "depends_on": ["enhance_005", "enhance_006", "enhance_007"],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true
    },
    {
      "id": "enhance_013",
      "title": "Backend snap data cleanup in account deletion",
      "description": "Update backend/internal/services/auth_service.go DeleteAccount method to also clean up snap data when a user deletes their account (Apple Guideline 5.1.1 compliance).\n\nIn the transaction block (line 126-141), add two additional deletion queries before the user soft-delete:\n- tx.Where(\"user_id = ?\", userID).Delete(&models.Snap{}) — delete all user's snaps\n- tx.Where(\"user_id = ?\", userID).Delete(&models.SnapStreak{}) — delete user's streak record\n\nPlace these after the blocks deletion (line 137) and before the user soft-delete (line 140). This ensures complete data scrub including all Snapstreak-specific data.\n\nAlso update backend/internal/handlers/snap_handler.go: add extractUserID helper if not already shared. Check if there's a shared extractUserID function in handlers package. The existing auth_handler.go references extractUserID(c) — find where it's defined and ensure snap_handler.go can use it. If it's in a helpers file, import it. If it's unexported in auth_handler.go, either move to a shared helpers.go file or duplicate it. Create backend/internal/handlers/helpers.go with extractUserID function if it doesn't exist as a shared utility: parse JWT sub claim from c.Locals(\"user\") token, return uuid.UUID.",
      "status": "pending",
      "priority": 9,
      "depends_on": ["enhance_001"],
      "test_command": "cd backend && go build ./...",
      "auto_commit": true
    },
    {
      "id": "enhance_014",
      "title": "Add missing npm dependencies for camera and storage",
      "description": "The mobile app needs additional packages that are not in package.json but are required by the new features. Run npm install --legacy-peer-deps for these packages:\n\n1. expo-image-picker — needed for camera and photo library access in snap creation (home.tsx and snap-create.tsx). Used as: import * as ImagePicker from 'expo-image-picker'; const result = await ImagePicker.launchCameraAsync({mediaTypes:['images'], allowsEditing:true, aspect:[1,1], quality:0.8}).\n\n2. @react-native-async-storage/async-storage — needed for onboarding completion flag, guest mode counter, daily reminder toggle, and other local persistence. Used as: import AsyncStorage from '@react-native-async-storage/async-storage'.\n\nAlso update mobile/app.json plugins array to include 'expo-image-picker' for proper iOS permissions. Add infoPlist under ios section: {\"NSCameraUsageDescription\": \"Snapstreak needs camera access to take daily snaps\", \"NSPhotoLibraryUsageDescription\": \"Snapstreak needs photo library access to select photos for your snaps\"}.\n\nCreate mobile/types/snap.ts with TypeScript interfaces matching the backend DTOs: Snap{id:string, user_id:string, image_url:string, caption:string, filter:string, snap_date:string, like_count:number, created_at:string}, SnapStreak{current_streak:number, longest_streak:number, total_snaps:number, last_snap_date:string, has_snapped_today:boolean}, SnapsListResponse{snaps:Snap[], total:number, page:number, limit:number}.",
      "status": "pending",
      "priority": 9,
      "depends_on": [],
      "test_command": "cd mobile && npm install --legacy-peer-deps && npx tsc --noEmit",
      "auto_commit": true
    }
  ]
}